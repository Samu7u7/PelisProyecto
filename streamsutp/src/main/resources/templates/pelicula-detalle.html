<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${pelicula.titulo} + ' - StreamsUTP'">Detalle</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
    body { background: #0b0f17; color: #fff; }    /* Forzar contenido del hero a la izquierda como en el diseño */
    /* Fondo más grande y posicionado a la derecha/arriba para mostrar la portada pegada al tope */
    /* Usar cover para que la imagen siempre cubra todo el hero y no deje bandas negras */
    .hero { position: relative; min-height: 85vh; background-size: cover; background-position: right top; background-repeat:no-repeat; display:flex; align-items:flex-start; justify-content:flex-start; }
    /* Overlay más suave en la parte central-izquierda para dejar la imagen visible a la derecha */
    .hero-overlay { position:absolute; inset:0; background: linear-gradient(90deg, rgba(3,6,12,0.92) 0%, rgba(3,6,12,0.70) 35%, rgba(3,6,12,0.0) 60%); pointer-events:none; }
     /* Hacer que el bloque izquierdo ocupe aproximadamente la mitad del área (dejando más imagen visible)
         Centrar verticalmente el contenido y desplazarlo ligeramente hacia abajo para que el texto aparezca más abajo */
           .hero-content { position:relative; z-index:2; padding:48px 38px 48px 40px; width:100%; max-width:none; margin-left:5vw; display:flex; flex-direction:column; justify-content:center; transform: translateY(30%); }
    /* Eliminar gutters/padding del grid dentro del hero para que el texto llegue al centro */
    .hero .row { margin-left:0; margin-right:0; }
    .hero .col-12.col-md-6 { padding-left:0; padding-right:0; }
    .hero h1 { font-size:68px; margin-bottom:18px; font-weight:800; line-height:1.05; max-width:100%; }
    /* Hacer el párrafo más ancho (extendido) y ligeramente mayor para coincidir con la imagen */
    .hero p { color: rgba(255,255,255,0.93); line-height:1.6; font-size:19px; max-width:none; width:100%; }
    /* Añadir sombra ligera al texto para mejorar contraste con la portada */
    .hero h1, .hero p { text-shadow: 0 2px 12px rgba(0,0,0,0.55); }
        .hero .cta { margin-top:22px; display:flex; gap:12px; align-items:center; }
    .btn-ghost { background: rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.08); color:#fff; padding:12px 18px; border-radius:10px; }
    .btn-primary-cta { background: linear-gradient(90deg,#0ea5a3,#0b7285); border:none; color:#fff; padding:12px 18px; border-radius:10px; font-weight:700; }
    /* Helper for buttons with an icon on the left */
    .btn-icon { display:inline-flex; align-items:center; gap:12px; }
    .btn-icon svg { width:20px; height:20px; flex:0 0 20px; display:block; }
    /* Botón principal de reproducción y compra con tamaño uniforme */
    .btn-play { min-width: 260px; padding:14px 28px; font-size:18px; font-weight:700; }
    /* Mantener pequeño margen superior para el botón de compra cuando está debajo */
    .btn-buy { margin-top:6px; }
    /* Precio dentro del botón: un poco más pequeño para jerarquía visual */
    .btn-price { font-size:14px; }
    /* Estilo específico para el botón Comprar: degradado amarillo/ámbar (#ffc107) */
    .btn-buy-style {
        background: linear-gradient(90deg, #ffc107 0%, #ffca2b 100%);
        color: #111827; /* texto oscuro para contraste */
        border: none;
        box-shadow: 0 6px 18px rgba(255,193,7,0.18);
    }
    .btn-buy-style:hover, .btn-buy-style:focus {
        filter: brightness(0.95);
        box-shadow: 0 8px 20px rgba(255,193,7,0.22);
    }
        .meta { margin-top:12px; color:rgba(255,255,255,0.65); }
        .action-row { margin-top:18px; display:flex; gap:12px; align-items:center; }
        .small-ghost { display:block; text-align:center; margin-top:8px; color:rgba(255,255,255,0.85); }

        /* Responsive: comportarse como el carrusel en pantallas pequeñas */
        @media (max-width: 1200px) {
            .hero { min-height: 75vh }
            /* En pantallas <1200px subir ligeramente el contenido para que no quede tan bajo */
            .hero-content { width:100%; padding-left:36px; transform: translateY(8%); }
            .hero h1 { font-size:56px; }
        }

        @media (max-width: 992px) {
            .hero { min-height: 65vh; }
            .hero-content { width:100%; padding-left:28px; }
            .hero h1 { font-size:44px; }
            .hero p { font-size:16px; }
        }

        @media (max-width: 768px) {
            /* En móviles el bloque ocupa todo el ancho (como el carrusel) */
            /* Mantener la portada pegada arriba: recortada desde el tope */
            /* En móviles mantener cover para evitar bandas negras y recortar desde arriba */
            .hero { min-height: 55vh; background-position: right top; background-size: cover; }
                /* Bajar ligeramente el contenido en móviles para mejorar equilibrio visual */
                .hero-content { width:100%; padding:24px 18px; transform: translateY(12%); }
            .hero h1 { font-size:34px; margin-bottom:12px; }
            .hero p { font-size:15px; line-height:1.5; }
            .d-flex.align-items-start { flex-direction:column; align-items:flex-start; gap:10px; }
            .btn.btn-primary-cta.btn-lg { padding:10px 16px; font-size:16px; }
            .hero .row { margin-left:0; margin-right:0; }
            .hero .col-12.col-md-6 { padding-left:0; padding-right:0; }
            /* ocultar iconos grandes en móviles para ahorrar espacio */
            .hero > .hero-content .btn-ghost[style] { display:none; }
        }

        @media (max-width: 480px) {
            .hero { min-height: 48vh; }
            .hero h1 { font-size:28px; }
            .hero p { font-size:14px; }
            .btn.btn-primary-cta { padding:8px 14px; font-size:14px; }
        }
    </style>
</head>
<body>
<div th:replace="~{fragments/header :: navbar}"></div>

<section th:style="|background-image: url(${pelicula.portada});|" class="hero">
    <div class="hero-overlay"></div>
    <div class="hero-content container-fluid">
        <div th:if="${mensaje}" class="alert alert-success" th:text="${mensaje}"></div>
        <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>

    <div class="row w-100 align-items-start">
        <div class="col-12 col-md-6">
                <h1 th:text="${pelicula.titulo}">Título</h1>
                <p th:text="${pelicula.descripcion}">Descripción corta de la película</p>
                <div class="meta">
                    <span th:text="${pelicula.duracionMinutos} + ' min'"></span>
                    • <span th:text="${pelicula.anioLanzamiento}"></span>
                    • <span th:text="${pelicula.genero}"></span>
                </div>

                <!-- Área principal de botones (alineados a la izquierda) -->
                <div class="d-flex align-items-start" style="gap:18px; margin-top:22px;">
                    <div>
                        <!-- Botón grande 'Reproducir' -->
                        <a th:href="@{/reproducir/{id}(id=${pelicula.id})}" class="btn btn-primary-cta btn-play btn-lg btn-icon">
                            <!-- Play icon (left) -->
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                <path d="M4.5 3.5v17l15-8.5-15-8.5z" />
                            </svg>
                            Reproducir
                        </a>
                        

                        <!-- Botón 'Comprar' debajo con el mismo estilo visual -->
                        <form th:action="@{/carrito/agregar}" method="post" style="margin-top:12px; text-align:left;">
                            <input type="hidden" name="peliculaId" th:value="${pelicula.id}" />
                            <input type="hidden" name="titulo" th:value="${pelicula.titulo}" />
                            <input type="hidden" name="tipo" value="COMPRAR" />
                            <input type="hidden" name="imagen" th:value="${pelicula.imagen}" />
                            <input type="hidden" name="cantidad" value="1" />
                            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                            <button type="submit" class="btn btn-primary-cta btn-play btn-lg btn-icon btn-buy btn-buy-style">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bag-plus-fill" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M10.5 3.5a2.5 2.5 0 0 0-5 0V4h5zm1 0V4H15v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4h3.5v-.5a3.5 3.5 0 1 1 7 0M8.5 8a.5.5 0 0 0-1 0v1.5H6a.5.5 0 0 0 0 1h1.5V12a.5.5 0 0 0 1 0v-1.5H10a.5.5 0 0 0 0-1H8.5z"/>
</svg>
                                <span>Comprar</span>
                                <span class="ms-auto fw-bold btn-price" th:text="${'S/ ' + pelicula.precioComprar}">S/ 0</span>
                            </button>
                        </form>
                    </div>

                    <!-- espacio derecho (antes iconos) -->
                </div>

            </div>
            <!-- espacio derecho (imagen ya está como fondo) -->
        </div>
    </div>
</section>
    



<section class="container py-5">
    <div class="row">
        <div class="col-md-8">
            <h3>Detalles</h3>
            <p th:text="${pelicula.descripcion}"></p>
        </div>
        <div class="col-md-4">
            <h5>Información</h5>
            <ul>
                <li><strong>Precio compra:</strong> S/ <span th:text="${pelicula.precioComprar}">0</span></li>
                <li><strong>Duración:</strong> <span th:text="${pelicula.duracionMinutos}">0</span> min</li>
                <li><strong>Año:</strong> <span th:text="${pelicula.anioLanzamiento}">0</span></li>
                <li><strong>Género:</strong> <span th:text="${pelicula.genero}">Acción</span></li>
            </ul>
        </div>
    </div>
</section>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>

<footer class="bg-dark text-white py-4">
    <div class="container text-center">
        <p class="mb-0">© 2025 StreamsUTP. Todos los derechos reservados.</p>
    </div>
</footer>


</body>
</html>
